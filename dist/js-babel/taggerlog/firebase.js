'use strict';var taggerlog=taggerlog||{};(function(a){function b(b){var c=[{text:"This is an entry with some tags. Tap it to edit or delete.",tags:["getting-started","entries"]},{text:"The tags panel has the tags from all your entries. Clicking a tag makes it green and ACTIVE.",tags:["getting-started","tags"]},{text:"Only entries matching active tags are displayed.\n\nActive tags are automatically added to new entries.",tags:["getting-started","tags","entries"]},{text:"Holding a tag turns it red, making it EXCLUDED.\n\nEntries tagged with excluded tags are not displayed.",tags:["getting-started","tags","entries"]},{text:"This is demo application. Any entries will be lost!",tags:["warning","this-is-a-demo"]}];return new Promise(function(d){for(var e=[],f=c.length,g=a.db.batch(),h=0;h<f;h++){var j=c[h],k=j.text,l=j.tags,m={uid:b.uid,entry:k,date:new Date(Date.now()+100*(f-h)),"tag-list":l,"date-modified":firebase.firestore.FieldValue.serverTimestamp()},n=a.db.collection("diary-entry").doc();g.set(n,m),e=e.concat(l)}g.commit().then(function(){e=a.processTagList(e),a.db.collection("diary-tags").doc(b.uid).set({tags:e.join()}).then(function(){d()})})})}a.loggedInUser=null;var c={apiKey:"AIzaSyBB82hE6xrDRnr7e_wnftgQwrbOWrbhgcs",authDomain:"diarystore.firebaseapp.com",projectId:"diarystore",storageBucket:"diarystore.appspot.com",messagingSenderId:"719415357807",appId:"1:719415357807:web:9d7542eb704b4bc430f89a"},d=!1;$(function(){firebase.initializeApp(c),a.db=firebase.firestore(),"localhost"===location.hostname&&(a.db.useEmulator("localhost",8080),firebase.auth().useEmulator("http://localhost:9099/")),firebase.firestore().enablePersistence()["catch"](function(b){"failed-precondition"!=b.code&&"unimplemented"!=b.code,a.util.logError(b.message)}),firebase.auth().onAuthStateChanged(function(c){a.loggedInUser=c,d?(b(c).then(function(){a.init(),a.updateLoggedInUI()}),d=!1):(a.init(),a.updateLoggedInUI())})}),a.logOut=function(){firebase.auth().signOut()},a.logIn=function(){var b=new firebase.auth.GoogleAuthProvider;firebase.auth().signInWithPopup(b).then(function(a){a.additionalUserInfo.isNewUser&&(d=!0)})["catch"](function(b){a.util.logError(b)})}})(taggerlog);